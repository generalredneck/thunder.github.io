<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.33">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/thunder.svg"><title>Headless API | Thunder</title><meta name="description" content="Thunder is a Drupal distribution for professional publishers.">
    <link rel="modulepreload" href="/assets/app.e4b5da82.js"><link rel="modulepreload" href="/assets/headless.html.0cd15211.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/headless.html.39feaddc.js">
    <link rel="stylesheet" href="/assets/style.f03665c5.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><svg class="logo" version="1.1" id="Ebene_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 492 110.7" enable-background="new 0 0 492 110.7" xml:space="preserve"><g><path class="light" fill="#009FE3" d="M26.9,107c1.9,0.3,3.9,0.5,5.7,0.6c1.9,0.1,3.7,0.1,5.3,0.1c1.6,0,3.3-0.1,5.1-0.2c1.7-0.1,3.5-0.3,5.2-0.5
		V20.5h26c0.6-2.9,0.9-6,0.9-9.2c0-3-0.3-6-0.9-8.9H0.9C0.3,5.4,0,8.3,0,11.3c0,3.2,0.3,6.3,0.9,9.2h26V107L26.9,107z M80.9,107.2
		c1.7,0.3,3.5,0.5,5.2,0.6c1.7,0.1,3.4,0.1,5,0.1c1.6,0,3.3,0,5.1-0.1c1.7-0.1,3.5-0.3,5.2-0.6V67.6c0-4.1,0.5-7.4,1.4-9.9
		c0.9-2.5,2.1-4.5,3.5-5.9c1.4-1.4,3-2.4,4.7-2.8c1.7-0.5,3.4-0.7,5.1-0.7c4,0,6.8,1.4,8.4,4.2c1.6,2.8,2.5,6.8,2.5,12.1v42.6
		c1.7,0.3,3.5,0.5,5.2,0.6c1.7,0.1,3.4,0.1,5.1,0.1c1.6,0,3.3,0,5.1-0.1c1.7-0.1,3.5-0.3,5.2-0.6V59c0-10-2.2-17.3-6.5-22
		c-4.3-4.7-10.6-7-19-7c-3,0-5.7,0.4-8,1.2c-2.3,0.8-4.3,1.7-6,2.8c-1.6,1.1-3,2.3-4.1,3.5c-1.1,1.2-2,2.3-2.7,3.1V2
		c-1.7-0.3-3.5-0.5-5.2-0.6c-1.7-0.1-3.4-0.1-5.1-0.1c-1.7,0-3.3,0-5.1,0.1c-1.7,0.1-3.4,0.3-5.1,0.6V107.2L80.9,107.2z M337.8,31.6
		c-1.7-0.5-3.6-0.8-5.5-0.9c-1.9-0.1-3.7-0.2-5.5-0.2c-5.8,0-11.1,1-15.9,3.1c-4.8,2.1-8.8,4.9-12.1,8.5c-3.3,3.6-5.9,7.8-7.7,12.7
		c-1.8,4.9-2.7,10.1-2.7,15.6c0,7,1,12.9,3.1,17.7c2.1,4.8,4.9,8.8,8.5,11.9c3.6,3.1,7.7,5.3,12.4,6.7c4.7,1.4,9.6,2.1,14.8,2.1
		c6.7,0,12.4-0.4,17.1-1.1c4.7-0.7,9.3-1.8,13.9-3.1V0.7c-1.7-0.3-3.5-0.5-5.2-0.6C351.3,0,349.6,0,348,0c-1.6,0-3.3,0-5,0.1
		c-1.7,0.1-3.4,0.3-5.2,0.6V31.6L337.8,31.6z M337.8,90.6c-1.6,0.5-3.2,0.8-4.5,0.9c-1.4,0.1-2.9,0.2-4.5,0.2
		c-2.7,0-5.2-0.4-7.6-1.1c-2.3-0.7-4.3-1.9-6-3.6c-1.7-1.6-3-3.9-4-6.6c-1-2.8-1.5-6.1-1.5-10.1c0-3.2,0.4-6.3,1.1-9.2
		c0.7-3,1.9-5.5,3.4-7.7c1.6-2.2,3.5-3.9,5.9-5.2c2.4-1.3,5.2-2,8.4-2c1.8,0,3.4,0.1,4.6,0.2c1.2,0.1,2.8,0.5,4.7,0.9V90.6
		L337.8,90.6z M435.2,75.8c0.2-1.1,0.4-2.5,0.5-4.3c0.1-1.8,0.2-3.6,0.2-5.5c0-5-0.7-9.8-2.2-14.2c-1.5-4.4-3.6-8.2-6.5-11.4
		c-2.9-3.2-6.3-5.7-10.4-7.6c-4.1-1.8-8.7-2.8-14-2.8c-6,0-11.3,1-15.8,3.1c-4.5,2.1-8.3,4.9-11.3,8.5c-3.1,3.6-5.4,7.8-6.9,12.7
		c-1.6,4.9-2.3,10-2.3,15.6c0,5.6,0.8,10.8,2.3,15.6c1.5,4.8,3.8,8.8,7,12.3c3.1,3.4,7.2,6.1,12.2,8.1c5,1.9,13.8,2.9,20.8,2.9
		c9.5,0,15.2-1.5,22.8-4.4c-0.1-3.1-0.5-6-1.3-8.7c-0.8-2.7-1.7-5-2.8-7c-3.1,1.2-6.4,2.1-9.8,2.7c-3.4,0.6-6.8,0.9-10.1,0.9
		c-6,0-10.9-1.3-14.5-3.9c-3.7-2.6-5.7-6.8-6.1-12.7H435.2L435.2,75.8z M387.1,61.4c0.5-4.9,2-8.8,4.5-11.5
		c2.5-2.7,6.2-4.1,11.1-4.1c4.3,0,7.6,1.4,10,4.3c2.4,2.9,3.7,6.6,3.9,11.3H387.1L387.1,61.4z M446.6,107.2c1.8,0.3,3.6,0.5,5.3,0.6
		c1.7,0.1,3.4,0.1,5,0.1c1.6,0,3.3,0,5.1-0.1c1.7-0.1,3.5-0.3,5.2-0.6V71.4c0-5.2,0.6-9.3,1.8-12.2c1.2-2.9,2.7-5.1,4.6-6.5
		c1.8-1.5,3.8-2.4,5.8-2.7c2-0.3,3.9-0.5,5.5-0.5c0.3,0,1.1,0,2.4,0c1.3,0,2.5,0.1,3.6,0.3c0.4-1.7,0.7-3.6,0.8-5.5
		c0.1-1.9,0.2-3.7,0.2-5.4c0-1.4,0-2.7-0.1-3.9c-0.1-1.3-0.2-2.4-0.4-3.3c-0.6-0.2-1.5-0.3-2.8-0.4c-1.3-0.1-2.4-0.1-3.3-0.1
		c-4.7,0-8.5,1.2-11.6,3.6c-3.1,2.4-5.7,5.1-7.9,8.1c-0.1-0.7-0.2-1.5-0.4-2.5c-0.1-1-0.3-2-0.5-3.1c-0.2-1-0.4-2-0.7-2.9
		c-0.2-0.9-0.5-1.6-0.8-2.1c-1.4-0.3-2.7-0.5-4.1-0.7c-1.4-0.2-2.8-0.3-4.3-0.3c-1.6,0-3,0.1-4.3,0.2s-2.7,0.4-4.1,0.7V107.2
		L446.6,107.2z"></path><path class="dark" fill="#A2DAF8" d="M244.6,110.5c-20.6,0-30.4-12.3-32.5-17.1c-1.8-4.4-2.8-10-3-17l0,0v-2c0-0.1,0-0.3,0-0.4v-7
		c0-3.8-0.3-7-0.9-9.5c-0.6-2.6-1.6-4.6-2.9-6.1c-1.3-1.5-2.9-2.6-4.9-3.2c-1.9-0.6-4.2-0.9-6.8-0.9c-2.6,0-4.9,0.3-6.8,0.9
		c-1.9,0.6-3.6,1.7-4.9,3.2c-1.3,1.5-2.3,3.5-2.9,6.1c-0.6,2.6-0.9,5.8-0.9,9.8v39.8c-0.1,0-0.2,0-0.3,0c-3.4,0-6.5-8.3-9.8-8.3
		c-3.4,0-7-22.9-10.5-23.5v-8.6c0-8,1-14.5,3.1-19.3c2-4.8,10.4-8.5,13.9-11c3.4-2.5,6.9-6.1,19.9-6.1c20.6,0,30.4,12.3,32.5,17.1
		c1.8,4.4,2.8,10,3,17l0,0v2c0,0.1,0,0.3,0,0.4v7c0,3.8,0.3,7,0.9,9.5c0.6,2.6,1.6,4.6,2.9,6.1c1.3,1.5,2.9,2.6,4.9,3.2
		c1.9,0.6,4.2,0.9,6.8,0.9c2.6,0,4.9-0.3,6.8-0.9c1.9-0.6,3.6-1.7,4.9-3.2c1.3-1.5,2.3-3.5,2.9-6.1c0.6-2.6,0.9-5.8,0.9-9.8V33.7
		c0.1,0,0.2,0,0.3,0c3.4,0,6.5,8.3,9.8,8.3c3.4,0,7,22.9,10.5,23.5v8.6c0,8-1,14.5-3.1,19.3c-2,4.8-10.4,8.5-13.9,11
		C261,107,257.6,110.5,244.6,110.5"></path><path class="light" fill="#009FE3" d="M281.4,107V66.6c0-8-1-14.5-3.1-19.3c-2-4.8-4.8-8.5-8.2-11c-3.4-2.5-7.4-4.2-12-4.9
		c-4.1-0.7-8.5-1-12.9-1.1c-4.5,0.1-8.8,0.4-12.9,1.1c-4.6,0.8-8.6,2.4-12,4.9c-3.4,2.5-6.2,6.2-8.2,11c-2,4.8-3.1,11.3-3.1,19.3V74
		c0,3.8-0.3,7-0.9,9.5c-0.6,2.6-1.6,4.6-2.9,6.1c-1.3,1.5-2.9,2.6-4.9,3.2c-1.9,0.6-4.2,0.9-6.8,0.9c-2.6,0-4.9-0.3-6.8-0.9
		c-1.9-0.6-3.6-1.7-4.9-3.2c-1.3-1.5-2.3-3.5-2.9-6.1c-0.6-2.6-0.9-5.8-0.9-9.8V33.9c-3.5-0.6-6.9-0.9-10.3-0.9
		c-3.4,0-6.8,0.3-10.3,0.9v40.4c0,8,1,14.5,3.1,19.3c2,4.8,4.8,8.5,8.2,11c3.4,2.5,7.4,4.2,12,4.9c4.1,0.7,8.5,1,12.9,1.1
		c4.5-0.1,8.8-0.4,12.9-1.1c4.6-0.8,8.6-2.4,12-4.9c3.4-2.5,6.2-6.2,8.2-11c1.9-4.4,2.9-10.3,3-17.4l0,0v-1.5c0-0.1,0-0.3,0-0.4l0,0
		v-7.1c0-4,0.3-7.2,0.9-9.8c0.6-2.6,1.6-4.6,2.9-6.1c1.3-1.5,2.9-2.6,4.9-3.2c1.9-0.6,4.2-0.9,6.8-0.9c2.6,0,4.9,0.3,6.8,0.9
		c1.9,0.6,3.6,1.7,4.9,3.2c1.3,1.5,2.3,3.5,2.9,6.1c0.6,2.6,0.9,5.8,0.9,9.8V107c3.5,0.6,6.9,0.9,10.3,0.9
		C274.5,107.9,277.9,107.6,281.4,107L281.4,107z"></path></g></svg><span class="site-name can-hide">Thunder</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/user-guide/feature-overview.html" class="" aria-label="User Guide"><!--[--><!--]--> User Guide <!--[--><!--]--></a></div><div class="navbar-item"><a href="/developer-guide/setup.md" class="" aria-label="Developer Guide"><!--[--><!--]--> Developer Guide <!--[--><!--]--></a></div><div class="navbar-item"><a href="/contributing.md" class="" aria-label="Contribute"><!--[--><!--]--> Contribute <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://thunder.org" rel="noopener noreferrer" target="_blank" aria-label="Thunder.org"><!--[--><!--]--> Thunder.org <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/thunder/thunder-distribution" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/user-guide/feature-overview.html" class="" aria-label="User Guide"><!--[--><!--]--> User Guide <!--[--><!--]--></a></div><div class="navbar-item"><a href="/developer-guide/setup.md" class="" aria-label="Developer Guide"><!--[--><!--]--> Developer Guide <!--[--><!--]--></a></div><div class="navbar-item"><a href="/contributing.md" class="" aria-label="Contribute"><!--[--><!--]--> Contribute <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://thunder.org" rel="noopener noreferrer" target="_blank" aria-label="Thunder.org"><!--[--><!--]--> Thunder.org <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/thunder/thunder-distribution" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/developer-guide/setup.html" class="sidebar-item sidebar-heading" aria-label="Setup Thunder"><!--[--><!--]--> Setup Thunder <!--[--><!--]--></a><!----></li><li><p class="sidebar-item sidebar-heading">Operating <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/developer-guide/operating/varnish.html" class="sidebar-item" aria-label="Tag-based cache invalidation for Varnish"><!--[--><!--]--> Tag-based cache invalidation for Varnish <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a href="/developer-guide/testing.html" class="sidebar-item sidebar-heading" aria-label="Testing"><!--[--><!--]--> Testing <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/developer-guide/headless.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="Headless API"><!--[--><!--]--> Headless API <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/developer-guide/headless.html#introduction" class="router-link-active router-link-exact-active sidebar-item" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/developer-guide/headless.html#motivation-to-go-with-graphql-4" class="router-link-active router-link-exact-active sidebar-item" aria-label="Motivation to go with GraphQL 4"><!--[--><!--]--> Motivation to go with GraphQL 4 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/developer-guide/headless.html#basic-ideas" class="router-link-active router-link-exact-active sidebar-item" aria-label="Basic Ideas"><!--[--><!--]--> Basic Ideas <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/developer-guide/headless.html#usage" class="router-link-active router-link-exact-active sidebar-item" aria-label="Usage"><!--[--><!--]--> Usage <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/developer-guide/headless.html#install" class="router-link-active router-link-exact-active sidebar-item" aria-label="Install"><!--[--><!--]--> Install <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/developer-guide/headless.html#routing" class="router-link-active router-link-exact-active sidebar-item" aria-label="Routing"><!--[--><!--]--> Routing <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/developer-guide/headless.html#pages-query" class="router-link-active router-link-exact-active sidebar-item" aria-label="Pages query"><!--[--><!--]--> Pages query <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/developer-guide/headless.html#breadcrumb" class="router-link-active router-link-exact-active sidebar-item" aria-label="Breadcrumb"><!--[--><!--]--> Breadcrumb <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/developer-guide/headless.html#combined-queries" class="router-link-active router-link-exact-active sidebar-item" aria-label="Combined queries"><!--[--><!--]--> Combined queries <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/developer-guide/headless.html#entity-lists" class="router-link-active router-link-exact-active sidebar-item" aria-label="Entity lists"><!--[--><!--]--> Entity lists <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/developer-guide/headless.html#menu" class="router-link-active router-link-exact-active sidebar-item" aria-label="Menu"><!--[--><!--]--> Menu <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/developer-guide/headless.html#extending" class="router-link-active router-link-exact-active sidebar-item" aria-label="Extending"><!--[--><!--]--> Extending <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/developer-guide/headless.html#add-new-type" class="router-link-active router-link-exact-active sidebar-item" aria-label="Add new type"><!--[--><!--]--> Add new type <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/developer-guide/headless.html#extend-existing-types" class="router-link-active router-link-exact-active sidebar-item" aria-label="Extend existing types"><!--[--><!--]--> Extend existing types <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/developer-guide/headless.html#change-existing-definitions" class="router-link-active router-link-exact-active sidebar-item" aria-label="Change existing definitions"><!--[--><!--]--> Change existing definitions <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/developer-guide/headless.html#use-subrequest-data-producer" class="router-link-active router-link-exact-active sidebar-item" aria-label="Use subrequest data producer"><!--[--><!--]--> Use subrequest data producer <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/developer-guide/headless.html#supported-contrib-modules" class="router-link-active router-link-exact-active sidebar-item" aria-label="Supported contrib modules"><!--[--><!--]--> Supported contrib modules <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/developer-guide/headless.html#access-unpublished" class="router-link-active router-link-exact-active sidebar-item" aria-label="Access unpublished"><!--[--><!--]--> Access unpublished <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/developer-guide/headless.html#metatag-and-schema-metatag" class="router-link-active router-link-exact-active sidebar-item" aria-label="Metatag and Schema Metatag"><!--[--><!--]--> Metatag and Schema Metatag <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><li><p class="sidebar-item sidebar-heading">Migration <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/developer-guide/migration/migrate-3-6.html" class="sidebar-item" aria-label="Update Thunder 3 -&gt; Thunder 6"><!--[--><!--]--> Update Thunder 3 -&gt; Thunder 6 <!--[--><!--]--></a><!----></li><li><a href="/developer-guide/migration/migrate-2-3.html" class="sidebar-item" aria-label="Update Thunder 2 -&gt; Thunder 3"><!--[--><!--]--> Update Thunder 2 -&gt; Thunder 3 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p class="sidebar-item sidebar-heading">Changelogs <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/changelog/6.3.x" class="sidebar-item" aria-label="Changelog 6.3.x"><!--[--><!--]--> Changelog 6.3.x <!--[--><!--]--></a><!----></li><li><a href="/changelog/6.2.x" class="sidebar-item" aria-label="Changelog 6.2.x"><!--[--><!--]--> Changelog 6.2.x <!--[--><!--]--></a><!----></li><li><a href="/changelog/6.1.x" class="sidebar-item" aria-label="Changelog 6.1.x"><!--[--><!--]--> Changelog 6.1.x <!--[--><!--]--></a><!----></li><li><a href="/changelog/6.0.x" class="sidebar-item" aria-label="Changelog 6.0.x"><!--[--><!--]--> Changelog 6.0.x <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="headless-api" tabindex="-1"><a class="header-anchor" href="#headless-api" aria-hidden="true">#</a> Headless API</h1><h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction" aria-hidden="true">#</a> Introduction</h2><p>The thunder_gqls module provides a GraphQL API schema and implementation for Thunder based on the Drupal GraphQL module version 4. Version 4 of the GraphQL module does not provide an out-of-the-box API for Drupal, as previous versions did. Instead, it provides the ability to define a schema independent of the underlying Drupal installation, and utilities to map fields defined in that schema to data from Drupal.</p><p>To get most of this documentation, you should have a basic understanding of what GraphQL is, and how to do requests against GraphQL endpoints. A good starting point for this is the official <a href="https://graphql.org/learn/" target="_blank" rel="noopener noreferrer">GraphQl documentation<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>.</p><h2 id="motivation-to-go-with-graphql-4" tabindex="-1"><a class="header-anchor" href="#motivation-to-go-with-graphql-4" aria-hidden="true">#</a> Motivation to go with GraphQL 4</h2><p>Drupal core provides already a turn-key implementation for JSON-API, which basically just needs to be enabled and configured, and it is good to go. Similarly, version 3 of the GraphQL module is as quickly usable. Both modules expose all data structures from Drupal as they are.</p><p>So why did we manually implement an API? While it is very convenient to have schemas automatically created, it also leads to an API that is very close to the structure of Drupal. A consumer would have to know the relationships of entities within Drupal. Especially when working with paragraphs and media entities, you would have to be aware of the entity references to get to the actual data. For example, we use media entities for images in paragraphs. The referencing goes unconventionally deep in this case: If you wanted to get the src attribute of an image in such a paragraph, you would have to dereference Article =&gt; Paragraph =&gt; Media Entity =&gt; File Entity (src).</p><p>Another pain point is, that field names are automatically created. This leads to two separate problems: First, field names are awkward and again very Drupal specific. In GraphQL 3 we have entityUuid instead of uuid and fieldMyField instead of just myField. Second, since field names are automatically generated out of the machine name, the API would change, as soon as you change the machine name. This sounds not very likely, and for actual fields it should not happen, but sometimes even plugin names are used to create the schema, and plugins could be exchanged (we had an example of a views-plugin, that was exchanged).</p><p>Finally, routing with those automated APIs is very often a process that requires two requests, instead of one. Usually you just have some URL string, that could be a route to a node, a user, a term or any other entity. To get the actual data, you will have to do a route query first, to get the information on what kind of entity you are looking at (plus its ID), and then you would have to do a specific node, term or user query to get the actual page.</p><h2 id="basic-ideas" tabindex="-1"><a class="header-anchor" href="#basic-ideas" aria-hidden="true">#</a> Basic Ideas</h2><p>We introduce three main interfaces for which interfaces covering all main data types used in Thunder.</p><ol><li>Page</li><li>Media</li><li>Paragraph</li></ol><p>The Page interface is for all Drupal entities that have a URL, in Thunder that could be nodes, terms, users and similar. This gives us the possibility to request a page from a route without knowing if it is an article or a channel for example.</p><p>The Media interface is for all media entities, and the Paragraph interface for all paragraph entities.</p><p>As described above, we try to minimize references and keep fields as flat as possible - especially if the references are very Drupal specific. Also, Drupal specific field prefixes should be avoided, they make no sense for the frontend.</p><p>One example would be the Image type, which is implementing the Media interface. In Drupal, media entity fields are distributed between several entities, because the file entity does provide the basic file information, and the media entity adds more data fields to that, while referencing a file. Directly translated to a GraphQL API it would look similar to:</p><div class="language-graphql ext-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">type</span> <span class="token class-name">MediaImage</span> <span class="token punctuation">{</span>
  <span class="token attr-name">entityLabel</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">fieldDescription</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">fieldImage</span><span class="token punctuation">:</span> <span class="token class-name">Image</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Image</span> <span class="token punctuation">{</span>
  <span class="token attr-name">src</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">alt</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">width</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token attr-name">height</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>When you think about images as a frontend developer, you might expect datastructures similar to the following:</p><div class="language-graphql ext-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">type</span> <span class="token class-name">MediaImage</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">description</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">src</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">alt</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">width</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token attr-name">height</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>This is cleaner and does not expose internal Drupal structures and naming.</p><h2 id="usage" tabindex="-1"><a class="header-anchor" href="#usage" aria-hidden="true">#</a> Usage</h2><h3 id="install" tabindex="-1"><a class="header-anchor" href="#install" aria-hidden="true">#</a> Install</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>drush en thunder_gqls
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="routing" tabindex="-1"><a class="header-anchor" href="#routing" aria-hidden="true">#</a> Routing</h3><p>The starting point for most requests will be a URL. Usually, you cannot know what kind of content you will find behind that URL, meaning, which fields you would be able to request. We have simplified this in the Thunder GraphQL schema by introducing the page() request, which internally routes the URL to the correct entity and returns the entity or entity bundle as a Page interface. Multiple page types can then be queried with the &quot;... on Type&quot; construct.</p><p>Let&#39;s take a look at some examples.</p><h3 id="pages-query" tabindex="-1"><a class="header-anchor" href="#pages-query" aria-hidden="true">#</a> Pages query</h3><p>All examples can be tested in the GraphQL explorer (admin/config/graphql/servers/manage/thunder_graphql/explorer). The explorer will also give you a nice autocomplete, and show you all currently available fields.</p><h4 id="basic-example" tabindex="-1"><a class="header-anchor" href="#basic-example" aria-hidden="true">#</a> Basic example</h4><p>First a basic example for a page query. All we know so far is that the path is &quot;/example-page&quot;. So, how do we get the content?</p><div class="language-graphql ext-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">query</span> <span class="token punctuation">{</span>
  <span class="token property-query">page</span><span class="token punctuation">(</span><span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token string">&quot;/example-page&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">name</span>
    <span class="token operator">...</span> <span class="token keyword">on</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
      <span class="token property">mail</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span> <span class="token keyword">on</span> <span class="token class-name">Channel</span> <span class="token punctuation">{</span>
      <span class="token object">parent</span> <span class="token punctuation">{</span>
        <span class="token property">name</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span> <span class="token keyword">on</span> <span class="token class-name">Article</span> <span class="token punctuation">{</span>
      <span class="token property">seoTitle</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>This will return whatever it finds behind /example-page, and depending on whether it is a user page, a term page or article node, it will contain the requested fields.</p><h4 id="query-parameter" tabindex="-1"><a class="header-anchor" href="#query-parameter" aria-hidden="true">#</a> Query parameter</h4><p>To simplify request, hard coded strings as the &quot;path&quot; in the previous example can be moved to <a href="https://graphql.org/learn/queries/#variables" target="_blank" rel="noopener noreferrer">query variables<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>.</p><p>For this we slightly change the query to:</p><div class="language-graphql ext-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">query</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token property-query">page</span><span class="token punctuation">(</span><span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token variable">$path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">name</span>
    <span class="token comment"># Add your fields</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Then we add the $path variable with a json string like this:</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/example-page&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>This variable can be added in the GraphQL explorer in the corresponding input field. All following examples will assume a variable definition like this.</p><h4 id="paragraphs-example" tabindex="-1"><a class="header-anchor" href="#paragraphs-example" aria-hidden="true">#</a> Paragraphs example</h4><p>Articles and taxonomy terms contain paragraph fields in Thunder, the following example shows how to request paragraphs&#39; content.</p><div class="language-graphql ext-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">query</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token property-query">page</span><span class="token punctuation">(</span><span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token variable">$path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">name</span>
    <span class="token operator">...</span> <span class="token keyword">on</span> <span class="token class-name">Article</span> <span class="token punctuation">{</span>
      <span class="token property">seoTitle</span>
      <span class="token object">content</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span> <span class="token keyword">on</span> <span class="token class-name">ParagraphPinterest</span> <span class="token punctuation">{</span>
          <span class="token property">url</span>
        <span class="token punctuation">}</span>
        <span class="token operator">...</span> <span class="token keyword">on</span> <span class="token class-name">ParagraphText</span> <span class="token punctuation">{</span>
          <span class="token property">text</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>As you can see, the paragraphs are located in the content field. Different paragraphs have different fields, so we again use the &quot;... on&quot; syntax to request the correct ones. In the ParagraphPinterest example, the URL is directly located on the paragraphs&#39; level, and not inside the entity_reference field, where it can be found in the Drupal schema. This is an example on how we try to simplify and hide Drupal specific implementations.</p><h3 id="breadcrumb" tabindex="-1"><a class="header-anchor" href="#breadcrumb" aria-hidden="true">#</a> Breadcrumb</h3><p>The Drupal breadcrumb for a given path can be retrieved with this query:</p><div class="language-graphql ext-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">query</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token property-query">breadcrumb</span><span class="token punctuation">(</span><span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token variable">$path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">url</span>
    <span class="token property">title</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="combined-queries" tabindex="-1"><a class="header-anchor" href="#combined-queries" aria-hidden="true">#</a> Combined queries</h3><p>You can submit multiple queries with one request. EAn example query for both breadcrumb and page for the same path would be:</p><div class="language-graphql ext-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">query</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token property-query">breadcrumb</span><span class="token punctuation">(</span><span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token variable">$path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">url</span>
    <span class="token property">title</span>
  <span class="token punctuation">}</span>

  <span class="token property-query">page</span><span class="token punctuation">(</span><span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token variable">$path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">name</span>
    <span class="token comment"># Add your fields</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="entity-lists" tabindex="-1"><a class="header-anchor" href="#entity-lists" aria-hidden="true">#</a> Entity lists</h3><p>Some fields contain lists of entities, an example are the article lists for taxonomy terms. Those fields have parameters for offset and limit. The result will contain a list of entities, and the number of total items for that list. For example the channel page has a list of articles within that channel:</p><div class="language-graphql ext-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">query</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token property-query">page</span><span class="token punctuation">(</span><span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token variable">$path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">name</span>
    <span class="token operator">...</span> <span class="token keyword">on</span> <span class="token class-name">Channel</span> <span class="token punctuation">{</span>
      <span class="token property-query">articles</span><span class="token punctuation">(</span><span class="token attr-name">offset</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token attr-name">limit</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token property">total</span>
        <span class="token object">items</span> <span class="token punctuation">{</span>
          <span class="token property">name</span>
          <span class="token property">url</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="menu" tabindex="-1"><a class="header-anchor" href="#menu" aria-hidden="true">#</a> Menu</h3><p>Drupal&#39;s menus are queried as well. To get the main menu for a given path, you can send this query:</p><div class="language-graphql ext-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">query</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token property-query">menu</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token description string">&quot;<span class="token language-markdown">main</span>&quot;</span> <span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token variable">$path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">name</span>
    <span class="token property">id</span>
    <span class="token object">items</span> <span class="token punctuation">{</span>
      <span class="token property">title</span>
      <span class="token property">url</span>
      <span class="token property">inActiveTrail</span>
      <span class="token object">children</span> <span class="token punctuation">{</span>
        <span class="token property">title</span>
        <span class="token property">url</span>
        <span class="token property">inActiveTrail</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>The inActiveTrail field tells you, which menu entry represents the current path.</p><p>To retrieve multiple menus with one request, you can use <a href="https://graphql.org/learn/queries/#aliases" target="_blank" rel="noopener noreferrer">GraphQL aliases<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>:</p><div class="language-graphql ext-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">query</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">mainMenu</span><span class="token punctuation">:</span> <span class="token property-query">menu</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token description string">&quot;<span class="token language-markdown">main</span>&quot;</span> <span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token variable">$path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">name</span>
    <span class="token property">id</span>
    <span class="token object">items</span> <span class="token punctuation">{</span>
      <span class="token property">title</span>
      <span class="token property">url</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token attr-name">footerMenu</span><span class="token punctuation">:</span> <span class="token property-query">menu</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token description string">&quot;<span class="token language-markdown">footer</span>&quot;</span> <span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token variable">$path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">name</span>
    <span class="token property">id</span>
    <span class="token object">items</span> <span class="token punctuation">{</span>
      <span class="token property">title</span>
      <span class="token property">url</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="extending" tabindex="-1"><a class="header-anchor" href="#extending" aria-hidden="true">#</a> Extending</h2><p>The graphql module has an extension mechanism, called composable schema, that can be used in your projects to extend the Thunder schema with your custom types. We added some base classes and helper methods to simplify that work. The basic idea of the composable schema is described in the <a href="https://drupal-graphql.gitbook.io/graphql/v/8.x-4.x/advanced/composable-schemas" target="_blank" rel="noopener noreferrer">GraphQl Module documentation<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> As described in the documentation, you will need three files to extend the schema: Two schema files in the graphql folder of your module:</p><ul><li>your_schema_name.base.graphqls</li><li>your_schema_name.extension.graphqls</li></ul><p>And a PHP class file in src/Plugin/GraphQL/SchemaExtension</p><ul><li>YourSchemaNameSchemaExtension.php</li></ul><p>You will find examples for that in the thunder_gqls module, for all the schema extension we provide.</p><p>Let&#39;s do some examples: We will extend the Thunder schema with our own types. To do so, we first create a new custom module called myschema:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>drush generate module --answers<span class="token operator">=</span><span class="token string">&#39;{&quot;name&quot;: &quot;My Schema&quot;, &quot;machine_name&quot;: &quot;myschema&quot;, &quot;install_file&quot;: false, &quot;libraries.yml&quot;: false, &quot;permissions.yml&quot;: false, &quot;event_subscriber&quot;: false, &quot;block_plugin&quot;: false, &quot;controller&quot;: false, &quot;settings_form&quot;: false}&#39;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>This will create a barebone module called myschema in the modules folder. To continue working on your extension go ahead and create a new folder called graphql and put two empty files in it called myschema.base.graphqls and myschema.extension.graphqls in it. Now create another empty file called MySchemaSchemaExtension.php in the src/Plugin/GraphQL/SchemaExtension folder.</p><p>Your modules&#39; file structure should be similar to this now:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>+-- myschema.info.yml
+-- myschema.module
+-- graphql
|   +-- myschema.base.graphqls
|   +-- myschema.extension.graphqls
+-- src
    +-- Plugin
        +-- GraphQL
            +-- SchemaExtension
                +-- MySchemaSchemaExtension.php
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>The content of MySchemaSchemaExtension.php should be:</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">namespace</span> <span class="token package">Drupal<span class="token punctuation">\</span>myschema<span class="token punctuation">\</span>Plugin<span class="token punctuation">\</span>GraphQL<span class="token punctuation">\</span>SchemaExtension</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Drupal<span class="token punctuation">\</span>graphql<span class="token punctuation">\</span>GraphQL<span class="token punctuation">\</span>ResolverRegistryInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Drupal<span class="token punctuation">\</span>thunder_gqls<span class="token punctuation">\</span>Plugin<span class="token punctuation">\</span>GraphQL<span class="token punctuation">\</span>SchemaExtension<span class="token punctuation">\</span>ThunderSchemaExtensionPluginBase</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * My schema extension.
 *
 * @SchemaExtension(
 *   id = &quot;myschema&quot;,
 *   name = &quot;My schema extension&quot;,
 *   description = &quot;Adds my schema.&quot;,
 *   schema = &quot;thunder&quot;
 * )
 */</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">MySchemaExtension</span> <span class="token keyword">extends</span> <span class="token class-name">ThunderSchemaExtensionPluginBase</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>When you enable the module, your (currently empty) schema extension will be added to the list of available schema extensions. You will now be able to find and enable it on the admin page admin/config/graphql/servers/manage/thunder_graphql</p><h3 id="add-new-type" tabindex="-1"><a class="header-anchor" href="#add-new-type" aria-hidden="true">#</a> Add new type</h3><p>A common task will be to add a new data type. To do so, you will have to add a new type definition in myschema.base.graphqls. Say, you have added a new content type. Your myschema.base.graphqls should look like this now:</p><div class="language-graphql ext-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">type</span> <span class="token class-name">MyContentType</span> <span class="token keyword">implements</span> <span class="token class-name">Page</span> <span class="token operator">&amp;</span> <span class="token class-name">Entity</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
  <span class="token attr-name">uuid</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">entity</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">url</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">entityLinks</span><span class="token punctuation">:</span> <span class="token class-name">EntityLinks</span>
  <span class="token attr-name">published</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span><span class="token operator">!</span>
  <span class="token attr-name">changed</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">myCustomField</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>This declares the fields, that will be available through the API. Since it is a node content type, it will have a URL and should implement the Page interface. This makes it possible to be requested with the page() query.</p><p>We have implemented an automatic type resolver for Page types, that creates a GraphQL type from bundle names. It CamelCases the words separated by underscores and then removes the underscore. If you create a node content type - or taxonomy vocabulary - called my_content_type, we will automatically create the MyContentType GraphQL type for you.</p><p>The first 9 fields, from id to metatags, are mandatory fields from the Page interface, they will be taken care of by calling <code>resolvePageInterfaceFields()</code> (see example below). The &quot;mycustomfield&quot; field is a custom field, which we do not know about, so you would have to implement producers for it by yourself. This is done in the MySchemaSchemaExtension.php file.</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">namespace</span> <span class="token package">Drupal<span class="token punctuation">\</span>myschema<span class="token punctuation">\</span>Plugin<span class="token punctuation">\</span>GraphQL<span class="token punctuation">\</span>SchemaExtension</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Drupal<span class="token punctuation">\</span>graphql<span class="token punctuation">\</span>GraphQL<span class="token punctuation">\</span>ResolverRegistryInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Drupal<span class="token punctuation">\</span>thunder_gqls<span class="token punctuation">\</span>Plugin<span class="token punctuation">\</span>GraphQL<span class="token punctuation">\</span>SchemaExtension<span class="token punctuation">\</span>ThunderSchemaExtensionPluginBase</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * My schema extension.
 *
 * @SchemaExtension(
 *   id = &quot;myschema&quot;,
 *   name = &quot;My schema extension&quot;,
 *   description = &quot;Adds my schema.&quot;,
 *   schema = &quot;thunder&quot;
 * )
 */</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">MySchemaExtension</span> <span class="token keyword">extends</span> <span class="token class-name">ThunderSchemaExtensionPluginBase</span> <span class="token punctuation">{</span>
  <span class="token doc-comment comment">/**
   * <span class="token punctuation">{</span><span class="token keyword">@inheritdoc</span><span class="token punctuation">}</span>
   */</span>
  <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">registerResolvers</span><span class="token punctuation">(</span><span class="token class-name type-declaration">ResolverRegistryInterface</span> <span class="token variable">$registry</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Call the parent resolver first.</span>
    <span class="token keyword static-context">parent</span><span class="token operator">::</span><span class="token function">registerResolvers</span><span class="token punctuation">(</span><span class="token variable">$registry</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// This adds all the Page interface fields to the resolver,</span>
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">resolvePageInterfaceFields</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;MyContentType&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;node&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Now we add field resolvers for our new fields. In this case we simply get</span>
    <span class="token comment">// the value from the field_mycustomfield. parent::registerResolvers($registry)</span>
    <span class="token comment">// stores $registry into the registry property, which we should use instead</span>
    <span class="token comment">// of $registry.</span>
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">registry</span><span class="token operator">-&gt;</span><span class="token function">addFieldResolver</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;MyContentType&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;mycustomfield&#39;</span><span class="token punctuation">,</span>
      <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">builder</span><span class="token operator">-&gt;</span><span class="token function">fromPath</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;entity&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;field_mycustomfield.value&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>That&#39;s it, most of it is boilerplate code, just the <code>$this-&gt;registry-&gt;addFieldResolver(&#39;MyContentType&#39;, &#39;mycustomfield&#39;,</code> part is necessary for your custom field. To learn more about producers and which are available out of the box, please read the <a href="https://drupal-graphql.gitbook.io/graphql/v/8.x-4.x/data-producers/producers" target="_blank" rel="noopener noreferrer">Drupal GraphQl module documentation<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>.</p><p>Similar extensions can be made for new media types and new paragraph types. The main difference is, that media and paragraph type names are prefixed with Media and Paragraph. If you have a custom paragraph called my_paragraph, the GraphQL type name would be ParagraphMyParagraph, and the media my_media would be called MediaMyMedia.</p><h3 id="extend-existing-types" tabindex="-1"><a class="header-anchor" href="#extend-existing-types" aria-hidden="true">#</a> Extend existing types</h3><p>Another common task is extending existing content types with new fields. When adding more fields to the article content type, you will have to add the producers for those fields.</p><p>This is very similar to creating a new type, but instead of using the myschema.base.graphqls file to declare your schema, you have to use the myschema.extension.graphqls file to extend the existing schema.</p><div class="language-graphql ext-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Article</span> <span class="token punctuation">{</span>
  <span class="token attr-name">hero</span><span class="token punctuation">:</span> <span class="token class-name">MediaImage</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>This will add a new image field to the Article type. Similar to adding a new content type, we need to add the data producer for that field in our MySchemaSchemaExtension.php:</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">namespace</span> <span class="token package">Drupal<span class="token punctuation">\</span>myschema<span class="token punctuation">\</span>Plugin<span class="token punctuation">\</span>GraphQL<span class="token punctuation">\</span>SchemaExtension</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Drupal<span class="token punctuation">\</span>graphql<span class="token punctuation">\</span>GraphQL<span class="token punctuation">\</span>ResolverRegistryInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Drupal<span class="token punctuation">\</span>thunder_gqls<span class="token punctuation">\</span>Plugin<span class="token punctuation">\</span>GraphQL<span class="token punctuation">\</span>SchemaExtension<span class="token punctuation">\</span>ThunderSchemaExtensionPluginBase</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * My schema extension.
 *
 * @SchemaExtension(
 *   id = &quot;myschema&quot;,
 *   name = &quot;My schema extension&quot;,
 *   description = &quot;Adds my schema.&quot;,
 *   schema = &quot;thunder&quot;
 * )
 */</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">MySchemaExtension</span> <span class="token keyword">extends</span> <span class="token class-name">ThunderSchemaExtensionPluginBase</span> <span class="token punctuation">{</span>
  <span class="token doc-comment comment">/**
   * <span class="token punctuation">{</span><span class="token keyword">@inheritdoc</span><span class="token punctuation">}</span>
   */</span>
  <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">registerResolvers</span><span class="token punctuation">(</span><span class="token class-name type-declaration">ResolverRegistryInterface</span> <span class="token variable">$registry</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Call the parent resolver first.</span>
    <span class="token keyword static-context">parent</span><span class="token operator">::</span><span class="token function">registerResolvers</span><span class="token punctuation">(</span><span class="token variable">$registry</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// This adds all the Page interface fields to the resolver,</span>
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">resolvePageInterfaceFields</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;MyContentType&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Now we add field resolvers for our new fields. In this case we simply get</span>
    <span class="token comment">// the value from the field_mycustomfield. parent::registerResolvers($registry)</span>
    <span class="token comment">// stores $registry into the registry property, which we should use instead</span>
    <span class="token comment">// of $registry.</span>
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">registry</span><span class="token operator">-&gt;</span><span class="token function">addFieldResolver</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;MyContentType&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;myCustomField&#39;</span><span class="token punctuation">,</span>
      <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">builder</span><span class="token operator">-&gt;</span><span class="token function">fromPath</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;entity&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;field_mycustomfield.value&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Extending the article</span>
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">registry</span><span class="token operator">-&gt;</span><span class="token function">addFieldResolver</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Article&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;hero&#39;</span><span class="token punctuation">,</span>
      <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">builder</span><span class="token operator">-&gt;</span><span class="token function">fromPath</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;entity&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;field_hero.entity&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h4 id="create-entity-lists" tabindex="-1"><a class="header-anchor" href="#create-entity-lists" aria-hidden="true">#</a> Create entity lists</h4><p>We have a base class for entity lists, which can be used to create your own list definitions.</p><h3 id="change-existing-definitions" tabindex="-1"><a class="header-anchor" href="#change-existing-definitions" aria-hidden="true">#</a> Change existing definitions</h3><p>It is also possible to change existing resolvers. Field resolver and type resolver are simply overridable in your schema extension class.</p><h4 id="fields" tabindex="-1"><a class="header-anchor" href="#fields" aria-hidden="true">#</a> Fields</h4><p>Existing fields, where you would like to change the producer, e.g. to use a different Drupal field, are very easy: Just make your own definition in the MySchemaSchemaExtension.php. If you would like to change the Drupal field for the content field from field_paragraph to field_my_paragraph, you change the producer in your registerResolvers() method to something like this:</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code>  <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">registry</span><span class="token operator">-&gt;</span><span class="token function">addFieldResolver</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Article&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;content&#39;</span><span class="token punctuation">,</span>
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">builder</span><span class="token operator">-&gt;</span><span class="token function">produce</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;entity_reference_revisions&#39;</span><span class="token punctuation">)</span>
      <span class="token operator">-&gt;</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;entity&#39;</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">builder</span><span class="token operator">-&gt;</span><span class="token function">fromParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token operator">-&gt;</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;field&#39;</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">builder</span><span class="token operator">-&gt;</span><span class="token function">fromValue</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;field_my_paragraphs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="thunder-entity-list-producer-and-entities-with-term-producer" tabindex="-1"><a class="header-anchor" href="#thunder-entity-list-producer-and-entities-with-term-producer" aria-hidden="true">#</a> Thunder entity list producer and entities with term producer</h5><p>The thunder_entity_list producer is a highly configurable producer to create lists of entities based on entity field queries. You can use it as a field producer for you custom fields. It can also be used as a base producer class for more specific producers. We include the entities_with_term as an example, which adds the ability to define a term depth ( similar to views) in your queries, when you want to have results for terms as well as their child terms, and presets specific query conditions, which simplifies the usage.</p><p>To use the producer for a field, you first have to define that field in your graphqls file. In this example we add a related articles field to the existing article type, so we have to add it to myschema.extension.graphqls.</p><div class="language-graphql ext-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Article</span> <span class="token punctuation">{</span>
  <span class="token attr-name">hero</span><span class="token punctuation">:</span> <span class="token class-name">MediaImage</span>
  <span class="token attr-name">promotedArticles</span><span class="token punctuation">(</span><span class="token attr-name">offset</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token attr-name">limit</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">EntityList</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>As you can see in the example, it is possible to expose parameters to the GraphQL client. We recommend limiting the exposed parameters as much as possible, and not give too much control to the consumer, because generating lists can produce great load on the server, and you might expose data that you did not expect. Offset and limit should be fine. Any limit that will be set greater than 100 will not be accepted.</p><p>Back in the MySchemaSchemaExtension.php we can now use the thunder_entity_list producer to resolve that field.</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code>  <span class="token comment">// Example for the thunder_entity_list list producer.</span>
  <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">registry</span><span class="token operator">-&gt;</span><span class="token function">addFieldResolver</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Article&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;promotedArticles&#39;</span><span class="token punctuation">,</span>
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">builder</span><span class="token operator">-&gt;</span><span class="token function">produce</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;thunder_entity_list&#39;</span><span class="token punctuation">)</span>
      <span class="token operator">-&gt;</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;type&#39;</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">builder</span><span class="token operator">-&gt;</span><span class="token function">fromValue</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;node&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token operator">-&gt;</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;bundles&#39;</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">builder</span><span class="token operator">-&gt;</span><span class="token function">fromValue</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;article&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token operator">-&gt;</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;offset&#39;</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">builder</span><span class="token operator">-&gt;</span><span class="token function">fromArgument</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;offset&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token operator">-&gt;</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;limit&#39;</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">builder</span><span class="token operator">-&gt;</span><span class="token function">fromArgument</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;limit&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token operator">-&gt;</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;conditions&#39;</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">builder</span><span class="token operator">-&gt;</span><span class="token function">fromValue</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token punctuation">[</span>
          <span class="token string single-quoted-string">&#39;field&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;promote&#39;</span><span class="token punctuation">,</span>
          <span class="token string single-quoted-string">&#39;value&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token operator">-&gt;</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;sortBy&#39;</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">builder</span><span class="token operator">-&gt;</span><span class="token function">fromValue</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token punctuation">[</span>
          <span class="token string single-quoted-string">&#39;field&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;created&#39;</span><span class="token punctuation">,</span>
          <span class="token string single-quoted-string">&#39;direction&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;DESC&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>As you can see, you can give either set hard coded values for the producers parameters, or values from query arguments (offset and limit in this example). When you want to use context dependent parameters to the conditions, you would have to use either more query arguments (which could be bad), or implement your own data producer based on ThunderEntityListProducerBase. You can find an example in EntitiesWithTerm.php where we dynamically add term IDs to the query conditions.</p><h3 id="use-subrequest-data-producer" tabindex="-1"><a class="header-anchor" href="#use-subrequest-data-producer" aria-hidden="true">#</a> Use subrequest data producer</h3><p>Sometimes it&#39;s needed to execute a data producer in the context of an URL. Thunder uses this functionality for resolving the breadcrumb, JSON-LD structure or the entity language.</p><p>The <em>ThunderEntitySubRequestBase</em> is data producer base class that can be used for this use cases. See <em>ThunderBreadcrumb</em>, <em>ThunderJsonLd</em> or <em>ThunderLanguage</em> as an implementation example.</p><h2 id="supported-contrib-modules" tabindex="-1"><a class="header-anchor" href="#supported-contrib-modules" aria-hidden="true">#</a> Supported contrib modules</h2><h3 id="access-unpublished" tabindex="-1"><a class="header-anchor" href="#access-unpublished" aria-hidden="true">#</a> Access unpublished</h3><p>With the access unpublished module, you can hand out links to unpublished nodes to a person, that would usually not have the permission to view unpublished articles.</p><p>The module creates a temporary link with an arbitrary hash token. This hash has to be added to the query in the following way:</p><div class="language-graphql ext-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">query</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token variable">$auHash</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token property-query">accessUnpublishedToken</span><span class="token punctuation">(</span><span class="token attr-name">auHash</span><span class="token punctuation">:</span> <span class="token variable">$auHash</span><span class="token punctuation">)</span>
  <span class="token property-query">page</span><span class="token punctuation">(</span><span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token variable">$path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">name</span>
    <span class="token comment"># Add your fields</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>The accessUnpublishedToken request has to be in the first line of the request.</p><h3 id="metatag-and-schema-metatag" tabindex="-1"><a class="header-anchor" href="#metatag-and-schema-metatag" aria-hidden="true">#</a> Metatag and Schema Metatag</h3><p>Data provided by the metatag and schema metatag (jsonld) modules is exposed by two similar calls and can be added to the page call in the following way:</p><div class="language-graphql ext-graphql line-numbers-mode"><pre class="language-graphql"><code><span class="token keyword">query</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token property-query">metatags</span><span class="token punctuation">(</span><span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token variable">$path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">tag</span>
    <span class="token property">attributes</span>
  <span class="token punctuation">}</span>
  <span class="token property-query">jsonld</span><span class="token punctuation">(</span><span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token variable">$path</span><span class="token punctuation">)</span>
  <span class="token property-query">page</span><span class="token punctuation">(</span><span class="token attr-name">path</span><span class="token punctuation">:</span> <span class="token variable">$path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">name</span>
    <span class="token comment"># Add your fields</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>The metatag query will return tag name, and the attributes as a json string. The jsonld query will return the jsonld string.</p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/thunder/thunder-distribution/edit/6.3.x/docs/developer-guide/headless.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/developer-guide/testing.html" class="" aria-label="Testing"><!--[--><!--]--> Testing <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.e4b5da82.js" defer></script>
  </body>
</html>
